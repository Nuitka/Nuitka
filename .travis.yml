# Python project, check against all supported things.
language: python
matrix:
  include:
    - os: osx # Python 3.4
    language: generic
    before_install:
    - travis_wait brew update
    - brew uninstall python
    - brew install https://raw.githubusercontent.com/Homebrew/homebrew-core/bd43f59bd50bb49242259f327cb6ac7a8dd59478/Formula/python3.rb
    - pip install virtualenv
    - virtualenv env -p python3
    - source env/bin/activate
    - alias pip="pip3"
   - os: osx # Python 3.5
    language: generic
    before_install:
    - travis_wait brew update
    - brew uninstall python
    - brew install https://raw.githubusercontent.com/Homebrew/homebrew-core/ec545d45d4512ace3570782283df4ecda6bb0044/Formula/python3.rb
    - pip install virtualenv
    - virtualenv env -p python3
    - source env/bin/activate
    - alias pip="pip3"
  - os: osx # Python 3.6
    language: generic
    before_install:
    - travis_wait brew update
    - pip install virtualenv
    - virtualenv env -p python3
    - source env/bin/activate
    - alias pip="pip3"
 - os: osx # Python 3.7
    language: generic
    before_install:
    - travis_wait brew update
    - brew upgrade python
    - pip install virtualenv
    - virtualenv env -p python3
    - source env/bin/activate
    - alias pip="pip3"
# commands to install dependencies
install:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get install scons chrpath ; fi
  # This will install PyLint but not where it does not work. It will fail
  # to install 2.6 and be buggy for 3.3
  - "pip install -r requirements-devel.txt"
  - "pip install ."
# commands to run tests
script:
  - ./tests/run-tests --no-other-python --skip-reflection-test --skip-all-cpython-tests
  - ./bin/check-nuitka-with-pylint --not-installed-is-no-error
