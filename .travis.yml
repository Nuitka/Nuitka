# Python project, check against all supported things.
language: python
matrix:
  include:
  - os: linux
    sudo: required
    python: 2.6
    dist: trusty
  - os: linux
    sudo: required
    python: 2.7
    dist: trusty
  - os: linux
    sudo: required
    python: 3.3
    dist: trusty
  - os: linux
    sudo: required
    python: 3.4
    dist: trusty
  - os: linux
    sudo: required
    python: 3.5
    dist: trusty
  - os: linux
    sudo: required
    python: 3.6
    dist: trusty
  - os: osx
    language: generic
    before_install:
    - travis_wait brew update
    - brew install python3
    - brew upgrade python
    - pip install virtualenv
    - virtualenv env -p python3
    - source env/bin/activate
    - alias pip="pip3"
# commands to install dependencies
install:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get install scons chrpath ; fi
  # This will install PyLint but not where it does not work. It will fail
  # to install 2.6 and be buggy for 3.3
  - "pip install -r requirements-devel.txt"
  - "pip install ."
# commands to run tests
script:
  - ./tests/run-tests --no-other-python --skip-reflection-test --skip-all-cpython-tests
  - ./bin/check-nuitka-with-pylint --not-installed-is-no-error
